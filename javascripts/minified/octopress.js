function getNav(){var e=$("ul.main-navigation, ul[role=main-navigation]").before('<fieldset class="mobile-nav">'),t=$("fieldset.mobile-nav").append("<select>");t.find("select").append('<option value="">Navigate&hellip;</option>');var a=function(){t.find("select").append('<option value="'+this.href+'">&raquo; '+$(this).text()+"</option>")};e.find("a").each(a),$("ul.subscription a").each(a),t.find("select").bind("change",function(e){e.target.value&&(window.location.href=e.target.value)})}function addSidebarToggler(){$("body").hasClass("sidebar-footer")||($("#content").append('<span class="toggle-sidebar"></span>'),$(".toggle-sidebar").bind("click",function(e){e.preventDefault(),$("body").toggleClass("collapse-sidebar")}));var e=$("aside.sidebar > section");e.length>1&&e.each(function(t,a){e.length>=3&&t%3===0&&$(a).addClass("first");var n=(t+1)%2?"odd":"even";$(a).addClass(n)}),e.length>=3&&$("aside.sidebar").addClass("thirds")}function testFeatures(){var e=["maskImage"];$(e).map(function(e,t){$("html").addClass(Modernizr.testAllProps(t)?t:"no-"+t)}),$("html").addClass("placeholder"in document.createElement("input")?"placeholder":"no-placeholder")}function addCodeLineNumbers(){"Microsoft Internet Explorer"!==navigator.appName&&$("div.gist-highlight").each(function(e){for(var t='<table><tbody><tr><td class="gutter">',a='<pre class="line-numbers">',n='</pre></td><td class="code">',r="</td></tr></tbody></table>",i=$(".line",e).length,s=1;i>=s;s++)a+='<span class="line-number">'+s+"</span>\n";var o=t+a+n+"<pre>"+$("pre",e).html()+"</pre>"+r;$(e).html(o)})}function flashVideoFallback(){var e="/assets/jwplayer/player.swf",t="/assets/jwplayer/glow/glow.xml";$("video").each(function(a,n){n=$(n),(!Modernizr.video.h264&&swfobject.getFlashPlayerVersion()||-1!==window.location.hash.indexOf("flash-test"))&&(n.children("source[src$=mp4]").first().map(a,function(a){var r=$(a).attr("src"),i="video_"+Math.round(1+1e5*Math.random()),s=n.attr("width"),o=parseInt(n.attr("height"),10)+30;n.after('<div class="flash-video"><div><div id='+i+">"),swfobject.embedSWF(e,i,s,o+30,"9.0.0",{file:r,image:n.attr("poster"),skin:t},{movie:r,wmode:"opaque",allowfullscreen:"true"})}),n.remove())})}function wrapFlashVideos(){$("object").each(function(e,t){$(t).find("param[name=movie]").length&&$(t).wrap('<div class="flash-video">')}),$("iframe[src*=vimeo],iframe[src*=youtube]").wrap('<div class="flash-video">')}function renderDeliciousLinks(e){for(var t="<ul>",a=0,n=e.length;n>a;a++)t+='<li><a href="'+e[a].u+'" title="Tags: '+(""==e[a].t?"":e[a].t.join(", "))+'">'+e[a].d+"</a></li>";t+="</ul>",$("#delicious").html(t)}$("document").ready(function(){testFeatures(),wrapFlashVideos(),flashVideoFallback(),addCodeLineNumbers(),getNav(),addSidebarToggler()}),function(e){function t(){s.content="width=device-width,minimum-scale="+i[0]+",maximum-scale="+i[1],e.removeEventListener(n,t,!0)}var a="addEventListener",n="gesturestart",r="querySelectorAll",i=[1,1],s=r in e?e[r]("meta[name=viewport]"):[];(s=s[s.length-1])&&a in e&&(t(),i=[.25,1.6],e[a](n,t,!0))}(document);var swfobject=function(){function e(e,a,n){var o,c=t(n);if(d.wk&&d.wk<312)return o;if(c)if(typeof e.id==r&&(e.id=n),d.ie&&d.win){var p,f="";for(p in e)e[p]!=Object.prototype[p]&&("data"==p.toLowerCase()?a.movie=e[p]:"styleclass"==p.toLowerCase()?f+=' class="'+e[p]+'"':"classid"!=p.toLowerCase()&&(f+=" "+p+'="'+e[p]+'"'));p="";for(var u in a)a[u]!=Object.prototype[u]&&(p+='<param name="'+u+'" value="'+a[u]+'" />');c.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+p+"</object>",o=t(e.id)}else{u=l.createElement(i),u.setAttribute("type",s);for(var v in e)e[v]!=Object.prototype[v]&&("styleclass"==v.toLowerCase()?u.setAttribute("class",e[v]):"classid"!=v.toLowerCase()&&u.setAttribute(v,e[v]));for(f in a)a[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(e=u,p=f,v=a[f],n=l.createElement("param"),n.setAttribute("name",p),n.setAttribute("value",v),e.appendChild(n));c.parentNode.replaceChild(u,c),o=u}return o}function t(e){var t=null;try{t=l.getElementById(e)}catch(a){}return t}function a(e){var t=d.pv,e=e.split(".");return e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)||0,e[2]=parseInt(e[2],10)||0,t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>=e[2]?!0:!1}function n(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=r?encodeURIComponent(e):e}var r="undefined",i="object",s="application/x-shockwave-flash",o=window,l=document,c=navigator,d=function(){var e=typeof l.getElementById!=r&&typeof l.getElementsByTagName!=r&&typeof l.createElement!=r,t=c.userAgent.toLowerCase(),a=c.platform.toLowerCase(),n=/win/.test(a?a:t),a=/mac/.test(a?a:t),t=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,d=!1,p=[0,0,0],f=null;if(typeof c.plugins!=r&&typeof c.plugins["Shockwave Flash"]==i)!(f=c.plugins["Shockwave Flash"].description)||typeof c.mimeTypes!=r&&c.mimeTypes[s]&&!c.mimeTypes[s].enabledPlugin||(d=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),p[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),p[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),p[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof o.ActiveXObject!=r)try{var u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");u&&(f=u.GetVariable("$version"))&&(d=!0,f=f.split(" ")[1].split(","),p=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}catch(v){}return{w3:e,pv:p,wk:t,ie:d,win:n,mac:a}}();return{embedSWF:function(t,n,s,o,l,c,p,f,u){var v={success:!1,id:n};if(d.w3&&!(d.wk&&d.wk<312)&&t&&n&&s&&o&&l){s+="",o+="";var h={};if(f&&typeof f===i)for(var m in f)h[m]=f[m];if(h.data=t,h.width=s,h.height=o,t={},p&&typeof p===i)for(var g in p)t[g]=p[g];if(c&&typeof c===i)for(var b in c)typeof t.flashvars!=r?t.flashvars+="&"+b+"="+c[b]:t.flashvars=b+"="+c[b];a(l)&&(n=e(h,t,n),v.success=!0,v.ref=n)}u&&u(v)},ua:d,getFlashPlayerVersion:function(){return{major:d.pv[0],minor:d.pv[1],release:d.pv[2]}},hasFlashPlayerVersion:a,createSWF:function(t,a,n){return d.w3?e(t,a,n):void 0},getQueryParamValue:function(e){var t=l.location.search||l.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return n(t);for(var t=t.split("&"),a=0;a<t.length;a++)if(t[a].substring(0,t[a].indexOf("="))==e)return n(t[a].substring(t[a].indexOf("=")+1))}return""}}}();